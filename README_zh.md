## 语言选择
- [English](README.md)
- [中文](README_zh.md)

---

## **项目简介**

AutoDCF 是一个基于现金流折现模型（DCF, Discounted Cash Flow）的股票估值工具。它通过分析公司的历史财务数据，为未来现金流预测提供核心变量参考，并根据用户输入的估值参数自动计算公司的内在价值。

自动化抓取历史数据并计算估值，能够显著节省数据整理和加工的时间，帮助投资者快速评估股票的内在价值，辅助投资决策。

---

## **项目亮点**

- **自动化**：通过输入股票代码，自动从金融数据平台 API 抓取公司历史数据，支持自定义历史期间类型和长度。输入关键估值参数后，自动计算未来现金流预测和公司内在价值。
- **交互性**：从历史数据展示、估值参数输入到最终的估值结果和敏感性分析，所有步骤都在终端中清晰呈现，一目了然。
- **Excel 导出**：支持将估值结果导出为 Excel 文件，方便存档和进一步分析调整。

---

## **DCF估值对价值投资的重要性**

现金流折现（DCF）估值反映了公司的内在价值，是价值投资中的关键工具。价格是我们支付的，价值是我们得到的。再好的公司，如果买贵了，也没有投资价值。正如巴菲特所说，"忘记以优异价格购买普通公司；相反，要以合理价格购买优秀公司。" DCF 估值是帮助我们评估公司“合理价格”或内在价值的关键工具。

DCF估值涉及诸多假设，本项目尽量减少手工输入的参数，聚焦于收入增长、经营效率（EBIT 利润率）和再投资这三个核心变量，提供一个“模糊的正确”框架。正如巴菲特所说，“模糊的正确胜过精确的错误（I would rather be vaguely right than precisely wrong）。” 通过模糊估值，我们可以更好理解股票估值背后的关键驱动因素，并通过敏感性分析找到股票的安全垫。在充满不确定性的股票市场中，DCF 估值为我们提供了一条通往长期成功的清晰路径。

---

## **安装与使用**

### **1. 下载项目**

### **方法一：使用 Git 克隆项目**

1. 打开电脑终端，运行以下命令将项目克隆到本地：
    
    ```
    git clone https://github.com/alanhewenyu/AutoDCF.git
    ```
    
2. 进入项目目录：
    
    ```
    cd AutoDCF
    ```
    

### **方法二：直接下载 ZIP 文件**

1. 点击页面右上角的 **Code** 按钮，然后选择 **Download ZIP**。
2. 解压下载的 ZIP 文件到您的电脑上。

---

### **2. 安装依赖**

1. 确保已安装 Python 3.8 或更高版本。您可以通过以下命令检查 Python 版本：
    
    ```
    python --version
    ```
    
    如果未安装 Python，请访问 [Python 官网](https://www.python.org/downloads/) 下载并安装。
    
2. 安装项目所需的依赖项：
    - 打开终端并导航到项目目录（如果您使用 ZIP 文件下载，请导航到解压后的文件夹）。
    - 运行以下命令安装依赖：
        
        ```
        pip install -r requirements.txt
        ```
        

---

### **3. 获取 API 密钥**

本项目使用 [Financial Modeling Prep (FMP)](https://financialmodelingprep.com/) 提供的财务数据。您需要注册一个 FMP 账户并获取 API 密钥。

FMP 是一家美国的金融数据提供商，覆盖全球上市公司的财务报表、市场交易数据和估值指标等信息。相比昂贵的金融终端（如 Wind 和 Bloomberg），FMP 提供的服务更轻量化，专注于股票数据，同时覆盖广泛的市场（如 A 股、港股和美股）。对于散户投资者来说，FMP 的数据足够全面且价格更为亲民。如果你需要通过 API 调取全球上市公司的历史财务数据并计算估值，FMP 是一个理想的选择。

### **如何设置 API 密钥**

- **方法一：环境变量**
    
    将 API 密钥设置为环境变量：
    
    ```
    export FMP_API_KEY='your_api_key_here'
    ```
    
- **方法二：直接修改代码**
    
    在 `main.py` 文件中，找到 `args.apikey` 的默认值，并将其替换为您的 API 密钥。
    

---

### **4. 运行程序**

打开终端并导航到项目目录，运行以下命令启动程序：

```
python main.py
```

---

### **5. 使用步骤**

1. **输入股票代码**：例如 `AAPL`（苹果公司）。
2. **选择财务数据周期**：支持年度（`annual`）或季度（`quarter`）数据。
3. **查看历史财务数据**：程序会显示公司的历史财务数据摘要。
4. **输入关键估值参数**：
    - **收入增长率**：未来 1 年和 2-5 年的收入增长率。
    - **EBIT 利润率**：目标 EBIT 利润率。
    - **收敛年数**：达到目标 EBIT 利润率所需的年数。
    - **收入与投资资本比率**：不同阶段的收入与投资资本比率。
    - **所得税率**：程序会基于历史数据自动计算均值，也可手动调整。
    - **WACC**：程序会基于抓取的数据自动计算加权平均资本成本，也可手动调整。
5. **查看估值结果**：程序会计算公司的内在价值，并显示计算过程及最终的每股价格。
6. **敏感性分析**：程序会生成收入增长率和 EBIT 利润率对每股价格的敏感性分析表。
7. **导出结果**：支持将估值结果导出为 Excel 文件，方便进一步分析和存档。

### **输入格式说明**

- 需要输入百分比的参数（包括收入增长率、EBIT 利润率、税率和 WACC）都使用数字表示，不带百分号。例如，如果收入增长率为 10%，请直接输入 `10`，而不是 `10%`。
- 程序会自动将这些输入的数值视为百分比（例如，输入 `10` 会被解释为 10%）。

---

## **关键估值参数说明**

| **参数名称** | **说明** |
| --- | --- |
| **收入增长率（Year 1）** | 由于公司通常会提供未来一年的业绩前景指引，我们把第一年收入预测单独计算。 |
| **收入增长率（Years 2-5）** | 未来第 2-5 年的复合收入增长率（CAGR）。 |
| **EBIT 利润率** | 公司达到稳定成熟期的 EBIT 利润率。 |
| **收敛年数** | 达到目标 EBIT 利润率所需的年数。 |
| **收入与投资资本比率（Year 1）** | 可参考历史财务数据中的收入/投资资本比率。但请注意，历史数据反映的是过去，而且是累积值，这里应考虑的是新增收入所需的资本投入。一个比较好的办法是同时参考历史财务数据中的再投资金额调整这一比率。 |
| **收入与投资资本比率（Years 3-5）** | 同上。 |
| **收入与投资资本比率（Years 5-10）** | 同上。 |
| **税率** | 程序会自动计算公司历史期间平均税率，可直接使用，也可输入新值。 |
| **WACC** | 程序会基于公司所在国家的无风险利率、股权风险溢价及公司 Beta 值等变量自动计算 WACC，可直接使用，也可输入新值。 |
| **RONIC** | 经济理论认为，竞争最终会消除异常回报，因此在竞争激烈的行业中，长期看，新投资资本的回报率（RONIC）将等于加权平均资本成本（WACC）。然而，一些具有持续竞争优势的公司（例如品牌）可能会在10年后仍保持超额回报。在这种情况下，计算终值时，可以接受一个高于WACC的RONIC，本估值模型预设值为WACC加5%。 |

---

## **贡献与反馈**

如果您有任何建议或发现问题，欢迎提交 Issue 或 Pull Request。您也可以通过邮件联系我：[alanhe@icloud.com](mailto:alanhe@icloud.com)。

如果想了解更多关于公司估值的内容，可关注我的微信公众号：**见山笔记**。

---

## **许可证**

本项目基于 MIT 许可证开源。详情请参阅 [LICENSE](https://chat.deepseek.com/a/chat/s/LICENSE) 文件。
